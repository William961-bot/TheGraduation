# After Effects Lyric Peak Mapper

This panel script helps you align pasted lyrics to an audio track by matching words to loudness peaks generated by After Effects' **Convert Audio to Keyframes** utility.

## Usage

1. In your composition, select the audio layer and run **Animation → Keyframe Assistant → Convert Audio to Keyframes**. This produces an `Audio Amplitude` null with slider keyframes.
2. With the composition active, run `LyricPeakMapper.jsx` (File → Scripts → Run Script File…).
3. In the palette:
   - Choose the amplitude layer (the generated `Audio Amplitude` null or any layer that includes the `Both Channels` slider).
   - Set the peak detection **threshold** and **minimum spacing** (default: 10 and 0.25s).
   - Paste your lyrics (words separated by spaces or newlines).
4. Click **Create Markers**.

The script will:
- Detect peak frames in the amplitude slider, respecting your threshold and spacing.
- Add markers labeled with each word on the chosen layer.
- Create or reuse a `Lyric Line` text layer with Source Text keyframes at the detected peaks.
- Report how many words were mapped vs. detected peaks so you can refine the threshold/spacing as needed.

## Tips

- If some words remain unmapped, lower the threshold or reduce the minimum spacing so more peaks qualify.
- If markers feel too dense, increase the minimum spacing.
- You can safely rerun the script; it will overwrite markers and keyframes each time.

